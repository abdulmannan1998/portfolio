---
phase: 10-section-animation-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/page.tsx
  - components/sections/metrics-section.tsx
autonomous: true

must_haves:
  truths:
    - "About section right column text elements fade in with stagger when scrolled into view"
    - "About section animations use CSS classes, not framer-motion"
    - "Metrics section cards fade-in-up with staggered delay when scrolled into view"
    - "Metrics section has no framer-motion import"
  artifacts:
    - path: "app/page.tsx"
      provides: "About section with CSS scroll animations replacing motion.* elements"
      contains: "fade-in-up"
    - path: "components/sections/metrics-section.tsx"
      provides: "Metrics cards with CSS scroll animations replacing motion.div"
      contains: "fade-in-up"
  key_links:
    - from: "app/page.tsx"
      to: "app/globals.css"
      via: "CSS animation classes on about section elements"
      pattern: "fade-in-up"
    - from: "components/sections/metrics-section.tsx"
      to: "app/globals.css"
      via: "CSS animation classes on metric cards"
      pattern: "fade-in-up.*--stagger-index"
    - from: "components/sections/metrics-section.tsx"
      to: "hooks/use-scroll-animation.ts"
      via: "initScrollAnimations for IO polyfill"
      pattern: "initScrollAnimations|useScrollAnimation"
---

<objective>
Migrate about section and metrics section from framer-motion to CSS scroll-driven animations.

Purpose: Remove framer-motion dependency from two of the four target sections, using CSS keyframe infrastructure from Phase 9 (animation-timeline: view() with IO polyfill fallback).
Output: About section in page.tsx uses CSS animation classes instead of motion.\* elements. Metrics section uses CSS animation classes with stagger delays instead of motion.div.
</objective>

<execution_context>
@/Users/sunny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-animation-foundation/09-01-SUMMARY.md
@app/page.tsx
@components/sections/metrics-section.tsx
@app/globals.css
@hooks/use-scroll-animation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate about section animations in page.tsx</name>
  <files>app/page.tsx</files>
  <action>
In app/page.tsx, replace the four framer-motion motion.* elements in the about section (lines ~189-229) with regular HTML elements that use CSS animation classes from Phase 9.

Current framer-motion elements to replace:

1. `motion.span` (About label) - initial={{ opacity: 0 }} whileInView={{ opacity: 1 }}
2. `motion.h2` (BUILDING INTERFACES heading) - initial={{ y: 50, opacity: 0 }} whileInView={{ y: 0, opacity: 1 }}
3. `motion.p` (first paragraph) - initial={{ y: 30, opacity: 0 }} whileInView={{ y: 0, opacity: 1 }} delay: 0.1
4. `motion.p` (second paragraph) - initial={{ y: 30, opacity: 0 }} whileInView={{ y: 0, opacity: 1 }} delay: 0.15

Replace each with:

1. `<span className="... fade-in-up">` (keep existing classes, add fade-in-up)
2. `<h2 className="... fade-in-up" style={{ '--stagger-index': 1 } as React.CSSProperties}>`
3. `<p className="... fade-in-up" style={{ '--stagger-index': 2 } as React.CSSProperties}>`
4. `<p className="... fade-in-up" style={{ '--stagger-index': 3 } as React.CSSProperties}>`

The first element (span) gets no stagger-index (defaults to 0 in CSS). Each subsequent element increments by 1, giving 0s, 0.1s, 0.2s, 0.3s delays which closely matches the current 0, 0, 0.1, 0.15 pattern with clean uniform spacing.

After this change, check if `motion` is still imported and used elsewhere in page.tsx. The hero section still uses motion.h1, motion.div, motion.p, and motion.div for entrance animations (initial/animate, not whileInView). These are hero page-load animations and are OUT OF SCOPE for this phase -- they stay as framer-motion. Do NOT remove the framer-motion import from page.tsx.

IMPORTANT: Do NOT touch the hero section motion elements (lines ~105-147). Only modify the about section (lines ~158-231).
</action>
<verify>
Run `npx next build` to confirm no build errors. Grep for `whileInView` in app/page.tsx -- should return zero matches. Grep for `motion.span` or `motion.h2` in the about section area -- should find none. The `import { motion } from "framer-motion"` line MUST still exist (hero section needs it).
</verify>
<done>
About section's four text elements use CSS fade-in-up classes with stagger-index custom properties. No whileInView props remain in page.tsx. Hero section motion elements are untouched. Build passes.
</done>
</task>

<task type="auto">
  <name>Task 2: Migrate metrics section to CSS animations</name>
  <files>components/sections/metrics-section.tsx</files>
  <action>
In components/sections/metrics-section.tsx, replace framer-motion motion.div with a regular div using CSS animation classes.

Current pattern (line 25-57):

```
<motion.div
  key={metric.id}
  initial={{ opacity: 0, y: 50 }}
  whileInView={{ opacity: 1, y: 0 }}
  transition={{ delay: index * 0.1 }}
  className="relative w-80 h-96 ..."
>
```

Replace with:

```
<div
  key={metric.id}
  className="relative w-80 h-96 ... fade-in-up"
  style={{ '--stagger-index': index } as React.CSSProperties}
>
```

This gives stagger delays of 0s, 0.1s, 0.2s, etc. per card, matching the current `index * 0.1` pattern.

After replacing, remove the framer-motion import line entirely (`import { motion } from "framer-motion"`).

For the IO polyfill, add a call to `initScrollAnimations` via useEffect at component mount. Import `initScrollAnimations` from `@/hooks/use-scroll-animation` and call it in a useEffect with empty deps array. Store the cleanup function and return it from useEffect.

The component needs `"use client"` to stay because AnimatedCounter is a client component and the useEffect for initScrollAnimations requires it.

Add these imports:

- `import { useEffect } from "react";`
- `import { initScrollAnimations } from "@/hooks/use-scroll-animation";`

Add useEffect at the top of the MetricsSection function body:

```
useEffect(() => {
  const cleanup = initScrollAnimations();
  return cleanup;
}, []);
```

  </action>
  <verify>
Run `npx next build` to confirm no build errors. Grep for `framer-motion` in components/sections/metrics-section.tsx -- should return zero matches. Grep for `motion` in the same file -- should return zero matches. Verify the file contains `fade-in-up` and `--stagger-index` and `initScrollAnimations`.
  </verify>
  <done>
Metrics section cards use CSS fade-in-up with stagger-index custom properties for sequential entrance. No framer-motion import or usage remains. IO polyfill initialized via initScrollAnimations. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `npx next build` completes without errors
2. `grep -c "whileInView" app/page.tsx` returns 0
3. `grep -c "framer-motion" components/sections/metrics-section.tsx` returns 0
4. `grep -c "fade-in-up" app/page.tsx` returns at least 4 (about section elements)
5. `grep -c "fade-in-up" components/sections/metrics-section.tsx` returns at least 1
6. `grep -c "motion" app/page.tsx` returns matches ONLY for hero section (motion.h1, motion.div, motion.p)
</verification>

<success_criteria>

- About section elements animate on scroll using CSS fade-in-up with stagger delays
- Metrics section cards animate on scroll using CSS fade-in-up with stagger delays
- No whileInView usage remains in page.tsx
- No framer-motion dependency remains in metrics-section.tsx
- IO polyfill provides fallback for browsers without animation-timeline support
- Build passes clean
  </success_criteria>

<output>
After completion, create `.planning/phases/10-section-animation-migration/10-01-SUMMARY.md`
</output>
