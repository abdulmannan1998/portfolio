---
phase: 01-dead-code-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/stores/graph-store.tsx
  - components/nodes/achievement-node.tsx
autonomous: true

must_haves:
  truths:
    - "Graph store contains only expandedNodes state and its actions (expandNode, collapseNode, collapseAll)"
    - "No filtering, highlighting, or view mode infrastructure exists in codebase"
    - "TypeScript compilation passes with no errors"
    - "Application runs without runtime errors"
  artifacts:
    - path: "lib/stores/graph-store.tsx"
      provides: "Minimal graph store with only used state"
      contains: "expandedNodes"
    - path: "components/nodes/achievement-node.tsx"
      provides: "Achievement node component without unused props"
  key_links:
    - from: "components/nodes/achievement-node.tsx"
      to: "lib/stores/graph-store.tsx"
      via: "useGraphStore hook"
      pattern: "expandedNodes.*expandNode.*collapseNode"
    - from: "components/dashboard-background.tsx"
      to: "lib/stores/graph-store.tsx"
      via: "useGraphStore hook"
      pattern: "expandedNodes"
---

<objective>
Remove all unused features from the graph store and clean up unused component props, reducing codebase to only actively used code.

Purpose: Eliminate dead code that increases bundle size and creates confusion about whether filtering/highlighting/view modes were planned or abandoned features.

Output: Minimal graph-store.tsx with only expandedNodes state, clean component props throughout.
</objective>

<execution_context>
@/Users/sunny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONCERNS.md

# Key files to modify

@lib/stores/graph-store.tsx
@components/nodes/achievement-node.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove unused graph store features (DEAD-01)</name>
  <files>lib/stores/graph-store.tsx</files>
  <action>
Remove the following dead code from graph-store.tsx:

**Types to remove:**

- `ViewMode` type (lines 5-5)
- `FilterState` type (lines 7-11)

**State and actions to remove from GraphState type:**

- `highlightedConnections: Set<string>` and its actions (`highlightConnections`, `clearHighlights`)
- `activeFilters: FilterState` and its actions (`applyFilter`, `clearFilters`)
- `viewMode: ViewMode` and its action (`setViewMode`)
- `hoveredNode: string | null` and its action (`setHoveredNode`)

**Initial state to remove from create():**

- `highlightedConnections: new Set()`
- `activeFilters: { technologies: [], companies: [], categories: [] }`
- `viewMode: "timeline"`
- `hoveredNode: null`

**Action implementations to remove:**

- `highlightConnections` function
- `clearHighlights` function
- `applyFilter` function
- `clearFilters` function
- `setViewMode` function
- `setHoveredNode` function

**Keep only:**

- `expandedNodes: Set<string>` state
- `expandNode`, `collapseNode`, `collapseAll` actions

The resulting file should be ~30 lines instead of ~98 lines.
</action>
<verify>

1. Run `npx tsc --noEmit` - should pass with no errors
2. Run `pnpm dev` and verify the graph loads without errors
3. Verify hover-to-expand achievement nodes still works
   </verify>
   <done>
   Graph store contains only expandedNodes state and its three actions. All filtering, highlighting, view mode, and hover node tracking code removed.
   </done>
   </task>

<task type="auto">
  <name>Task 2: Remove unused component props and parameters (DEAD-03)</name>
  <files>components/nodes/achievement-node.tsx</files>
  <action>
In achievement-node.tsx, the component receives `id` prop but renames it to `_id` (unused variable pattern) because `data.id` is used instead.

Either:

1. Remove `id: _id` from the destructuring entirely if ReactFlow doesn't require it
2. Or if ReactFlow requires the `id` prop to be received, keep the current pattern (underscore prefix is intentional for unused variables)

Check if `id` is required by ReactFlow's node component interface. If not required, remove it from the props destructuring on line 42.

Also audit AchievementNodeProps type - if `id` prop is removed, update the type accordingly.
</action>
<verify>

1. Run `npx tsc --noEmit` - should pass with no errors
2. Run `pnpm dev` and click on achievement nodes - expand/collapse should work
3. Check console for any React/ReactFlow warnings about missing props
   </verify>
   <done>
   Achievement node component has clean props with no unused variables (or underscore-prefixed variables are justified by interface requirements).
   </done>
   </task>

<task type="auto">
  <name>Task 3: Verify no unused imports across source files (DEAD-02)</name>
  <files>lib/stores/graph-store.tsx, components/nodes/achievement-node.tsx, components/dashboard-background.tsx, components/custom-node.tsx, lib/graph-utils.ts, lib/layout-calculator.ts</files>
  <action>
After completing Tasks 1 and 2, verify that all source files have no unused imports:

1. Run TypeScript strict check: `npx tsc --noEmit --noUnusedLocals`
2. If any unused imports are reported, remove them

Common patterns to check:

- graph-store.tsx: After removing features, ensure no orphaned imports remain
- All component files: Verify React imports match actual usage
- layout-calculator.ts: Check if all imported types are used

Do NOT remove imports that are used (even if only for type annotations).
</action>
<verify>

1. Run `npx tsc --noEmit --noUnusedLocals` - should pass with no errors
2. Run `npx eslint --ext .ts,.tsx ./lib ./components ./app` - no unused import warnings
   </verify>
   <done>
   All source files have zero unused imports. Every import is actively used.
   </done>
   </task>

</tasks>

<verification>
After all tasks complete:

1. **TypeScript Compilation:**

   ```bash
   npx tsc --noEmit
   ```

   Should pass with zero errors.

2. **Dev Server:**

   ```bash
   pnpm dev
   ```

   Application should start without errors.

3. **Functional Test:**
   - Open localhost:3000
   - Hover over company nodes to reveal achievements
   - Click achievement nodes to expand/collapse
   - Verify graph animations work correctly

4. **Code Size Verification:**
   - graph-store.tsx should be ~30 lines (down from ~98)
   - No `filter`, `highlight`, `viewMode`, or `hoveredNode` strings in codebase outside test/docs
     </verification>

<success_criteria>

- [ ] Graph store reduced from ~98 lines to ~30 lines
- [ ] Zero unused imports across all source files
- [ ] TypeScript compilation passes
- [ ] Application functions identically to before (expand/collapse works)
- [ ] No runtime errors in browser console
      </success_criteria>

<output>
After completion, create `.planning/phases/01-dead-code-removal/01-01-SUMMARY.md`
</output>
